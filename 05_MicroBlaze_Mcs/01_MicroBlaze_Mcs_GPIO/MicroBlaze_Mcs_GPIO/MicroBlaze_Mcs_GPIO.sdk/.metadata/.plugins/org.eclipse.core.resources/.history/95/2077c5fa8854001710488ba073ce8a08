/*
 * main.c
 *
 *  Created on: Jun 17, 2017
 *      Author: John
 */

#include "xparameters.h"
#include "xil_cache.h"
#include "xiomodule.h"

int main()
{
   Xil_ICacheEnable();
   Xil_DCacheEnable();

   init_platform();

   XIOModule gpi_1;
   XIOModule gpo_1;
   u32 data;

   data = XIOModule_Initialize(&gpi_1, XPAR_IOMODULE_0_DEVICE_ID);
   data = XIOModule_Start(&gpi_1);

   data = XIOModule_Initialize(&gpi_1, XPAR_IOMODULE_0_DEVICE_ID);
   data = XIOModule_Start(&gpo_1);

   while(1)
   {
   	print("Hello World\n\r");
   	data = XIOModule_DiscreteRead(&gpi_1, 1);
   	XIOModule_DiscreteWrite(&gpo_1, 1, data * 2);
   }


   Xil_DCacheDisable();
   Xil_ICacheDisable();
   return 0;
}
